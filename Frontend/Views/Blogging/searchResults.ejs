<% layout("../Layouts/boilerplate") %>

    <body>
        <main>
            <div class="search">
                <div class="search-heading">
                    <h3>Search Results for: <span>
                            <a href="https://www.google.com/search?q=<%= identity %>" target="_blank">
                                <%= identity %>
                            </a>
                        </span></h3>
                </div>
                <% if(allBlogs.length> 0){ %>
                    <div class="blogs">
                        <% for(blog of allBlogs) {%>
                            <div class="blog">
                                <!-- Blog Link and Image -->
                                <a aria-label="Read Full Blog" href="/<%= blog.slug %>">
                                    <img src="/images/admin_BLOGS/<%= blog.image.filename.replace('admin_BLOGS/', '') %>"
                                        alt="Blog Image">
                                    <h3 class="heebo-blog-title">
                                        <%= blog.title %>
                                    </h3>
                                </a>
                                <div class=" blog-card-container">
                                    <div class="blog-meta-data">
                                        <div class="author-in-card">
                                            <a href="/author/<%= blog.admin %>">
                                                <p>
                                                    <i class="fa fa-user" aria-hidden="true"></i>
                                                    <% if (blog.author) { %>
                                                        <%= blog.author %>
                                                            <% } else { %>
                                                                <%= blog.admin %>
                                                                    <% } %>
                                                </p>
                                            </a>
                                        </div>
                                        <div class="created-date">
                                            <p>Created Date: <span class="date-format">
                                                    <%= blog.created_date %>
                                                </span></p>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <%} %>
                    </div>
                    <%}else{%>
                        <p class="no-such-blog">No Such Blog</p>
                        <div class="no-blog-found">
                            <img src="/Resources/images/no blog found.png" alt="No Blog Found Here">
                        </div>
                        <%} %>

            </div>
            <div class="pagination">
                <% const startPage=Math.max(1, currentPage - 2); const endPage=Math.min(totalPages, currentPage + 2);
                    if(startPage> 1) { %>
                    <a href="?page=1&limit=<%= limit %>" class="page-link">1</a>
                    <% if (startPage> 2) { %>
                        <span class="page-dots">...</span>
                        <% } } for (let i=startPage; i <=endPage; i++) { %>
                            <% if (i===currentPage) { %>
                                <span class="page-link current">
                                    <%= i %>
                                </span>
                                <% } else { %>
                                    <a href="?page=<%= i %>&limit=<%= limit %>" class="page-link">
                                        <%= i %>
                                    </a>
                                    <% } %>
                                        <% } if (endPage < totalPages) { if (endPage < totalPages - 1) { %>
                                            <span class="page-dots">...</span>
                                            <% } %>
                                                <a href="?page=<%= totalPages %>&limit=<%= limit %>" class="page-link">
                                                    <%= totalPages %>
                                                </a>
                                                <% } %>
            </div>
        </main>

        <div id="blogContainer"></div>
    </body>